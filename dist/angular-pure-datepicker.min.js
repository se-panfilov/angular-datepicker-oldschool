var xDateCore=function(t,e,a){"use strict";var n={Config:{isUtc:!1,direction:{d:"asc",m:"asc",y:"desc"},defaultYearsCount:30,daysList:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthList:["January","February","March","April","May","June","July","August","September","October","November","December"]},CommonUtils:{isValidNumber:function(t){var e=!isNaN(parseFloat(t)),a=isFinite(t);return e&&a},getArrayOfNumbers:function(t,e){if(!this.isValidNumber(t)||!this.isValidNumber(e))return[];var a=t>e,n=a?t-e+1:e-t+1,i=new Array(n),s=Array.apply(null,i),r=s.map(function(n,i){return a?i+e:i+t});return a?r.reverse():r},intArraySort:function(t,e){function a(t,e){return e-t}var n="desc";switch(e){default:return t.sort(function(t,e){return t-e});case n:return t.sort(a)}}},DataClass:function(t,e,a){var i={list:{y:null,m:null,d:null},reloadYearsList:function(){i.list.y=n.YearsUtils.getYearsList()},reloadMonthList:function(){i.list.m=n.MonthUtils.getMonthList()},reloadDaysList:function(){i.list.d=n.DaysUtils.getDaysList()}};return t.dt=n.CommonUtils.isValidNumber(t.dt)?t.dt:null,e=n.CommonUtils.isValidNumber(e)?e:null,a=n.CommonUtils.isValidNumber(a)?a:null,i.list.y=n.YearsUtils.getYearsList(),i.list.m=n.MonthUtils.getMonthList(),i.list.d=n.DaysUtils.getDaysList(),i},DateModel:function(){return function(t){if(!t||Number.isNaN(+t)||!Number.isFinite(+t))throw"NaN or null";return this.d=n.DateUtils.getDay(+t),this.dow=n.DateUtils.getDayOfWeek(+t),this.m=n.DateUtils.getMonth(+t),this.y=n.DateUtils.getYear(+t),this.dt=+t,this.tz=new Date(+t).getTimezoneOffset(),this}}(),DateUtils:function(){function t(t,e){var a=new Date(+t);return a&&e?e.call(a):null}var e={getDay:function(e){if(!e&&0!==e)return null;var a=n.Config.isUtc?Date.prototype.getUTCDate:Date.prototype.getDate;return t(e,a)},getDayOfWeek:function(e){if(!e&&0!==e)return null;var a=n.Config.isUtc?Date.prototype.getUTCDay:Date.prototype.getDay;return t(e,a)},getYear:function(e){if(!e&&0!==e)return null;var a=n.Config.isUtc?Date.prototype.getUTCFullYear:Date.prototype.getFullYear;return t(e,a)},getMonth:function(e){if(!e&&0!==e)return null;var a=n.Config.isUtc?Date.prototype.getUTCMonth:Date.prototype.getMonth;return t(e,a)},getDaysInMonth:function(t,e){var a=n.Config.isUtc?Date.prototype.getUTCDate:Date.prototype.getDate;return a.call(new Date(+e,+t+1,0))},isValidModel:function(t){return!!t&&(!!t.dt||0===t.dt)&&!Number.isNaN(+t.dt)&&Number.isFinite(+t.dt)},isDateUpperStartLimit:function(t,e){if(!e)return!0;if(!t&&0!==t||Number.isNaN(+t)||Number.isNaN(+e))throw"NaN or null";return+t>+e},isDateLowerEndLimit:function(t,e){if(!e)return!0;if(Number.isNaN(+t)||Number.isNaN(+e))throw"NaN or null";return+e>+t},isDateBetweenLimits:function(t,a,n){return e.isDateUpperStartLimit(t,a)&&e.isDateLowerEndLimit(t,n)}};return e}(),DaysUtils:{getDaysList:function(){var t,e=1,a=n.DateUtils.getDaysInMonth(n.State.selected.y,n.State.selected.y),i=n.State.start.isExist,s=n.State.end.isExist;if(i||s){var r=i?n.State.start.y===n.State.selected.y:!1,o=s?n.State.end.y===n.State.selected.y:!1,d=i?n.State.start.m===n.State.selected.y:!1,l=s?n.State.end.m===n.State.selected.y:!1,u=r&&d,c=o&&l,m=i?n.State.start.d:e,f=s?n.State.end.d:a;t=u&&c?n.CommonUtils.getArrayOfNumbers(m,f):u&&!c?n.CommonUtils.getArrayOfNumbers(m,a):!u&&c?n.CommonUtils.getArrayOfNumbers(e,f):n.CommonUtils.getArrayOfNumbers(e,a)}else t=n.CommonUtils.getArrayOfNumbers(e,a);return n.CommonUtils.intArraySort(t,n.Config.direction.d)}},State:{selected:{},setSelected:function(t){var e,a=t>this.start.dt,i=t===this.start.dt,s=t>this.end.dt,r=t===this.end.dt;e=a||i||s||r?new n.DateModel(t):a?a?new n.DateModel(+new Date):new n.DateModel(this.end.dt):new n.DateModel(this.start),this.selected=e},start:{},setStart:function(t){this.start=new n.DateModel(t),this.start.isExist=!0},end:{},setEnd:function(t){this.end=new n.DateModel(t),this.end.isExist=!0},setLimits:function(t,e){this.setStart(t),this.setEnd(e)},resetNow:function(){this.now=new n.DateModel(+new Date)},now:null},MonthUtils:{getMonthList:function(){var t,e=0,a=11,i=n.State.start.isExist,s=n.State.end.isExist;if(i||s){var r=i?n.State.start.y===n.State.selected.y:!1,o=s?n.State.end.y===n.State.selected.y:!1,d=i?n.State.start.m:e,l=s?n.State.end.m:a;t=r&&o?n.CommonUtils.getArrayOfNumbers(d,l):r&&!o?n.CommonUtils.getArrayOfNumbers(d,a):!r&&o?n.CommonUtils.getArrayOfNumbers(e,l):n.CommonUtils.getArrayOfNumbers(e,a)}else t=n.CommonUtils.getArrayOfNumbers(e,a);return n.CommonUtils.intArraySort(t,n.Config.direction.m)}},YearsUtils:function(){function t(t,e,a){var n=e>a?e:a;return n+=t-1}function e(t,e,a){var n=a>e?e:a;return n-=t-1}function a(a,i,s,r){var o=n.Config.defaultYearsCount,d=t(o,a,r),l=e(o,a,r),u={isBoth:!(!i||!s),isBothNot:!(i||s),isOnlyStart:!(!i||s),isOnlyEnd:!(i||!s),isStartLower:s>i,isEndLower:i>s,isStartEqualEnd:i===s,isEndUpperNow:s>r,isEndEqualNow:s===r};if(u.isBoth&&u.isStartLower)return{from:i,to:s};if(u.isBoth&&u.isEndLower)return{from:s,to:i};if(u.isBoth&&u.isStartEqualEnd)return{from:i,to:s};if(u.isOnlyStart)return{from:i,to:d};if(u.isOnlyEnd){if(u.isEndUpperNow||u.isEndEqualNow)return l-o>s-o?{from:l,to:s}:{from:s-(o-1),to:s};if(!u.isEndUpperNow)return{from:s-(o-1),to:s}}return u.isBothNot?{from:l,to:d}:void 0}var i={getYearsList:function(){var t=a(n.State.selected.y,n.State.start.y,n.State.end.y,n.State.now.y),e=n.CommonUtils.getArrayOfNumbers(t.from,t.to);return n.CommonUtils.intArraySort(e,n.Config.direction.y)}};return i}()};return n.State.resetNow(),n.State.setLimits(e,a),n.State.setSelected(t),n};angular.module("angular-pd",["angular-pd.templates"]).directive("pureDatepicker",function(){return{restrict:"E",replace:!0,templateUrl:"apd.html",scope:{ngModel:"=",apdStart:"=?",apdEnd:"=?",apdDayId:"@?",apdMonthId:"@?",apdYearId:"@?",apdDayClasses:"@?",apdMonthClasses:"@?",apdYearClasses:"@?",apdLocalization:"=?",apdIsUtc:"=?"},link:function(t){function e(t,e,a){var n=new Date(a,e,t).getTime();return DateUtils.isDateBetweenLimits(n,r.startDateTime,r.endDateTime)||(DateUtils.isDateUpperStartLimit(n,r.startDateTime)?DateUtils.isDateLowerEndLimit(n,r.endDateTime)||(n=r.endDateTime):n=r.startDateTime),n}function a(e){o.stop(),t.data.selected=new DateModel(e),t.ngModel=t.data.selected,o.start(n)}function n(n,i){if(n!==i){var s=DateUtils.getDay(n),r=DateUtils.getMonth(n),o=DateUtils.getYear(n);n=e(s,r,o),a(n),t.data.reloadYearsList(),t.data.reloadMonthList(),t.data.reloadDaysList()}}function i(t){var a,n=DateUtils.isValidModel(t);a=n?t.dt:(new Date).getTime();var i=DateUtils.getDay(a),s=DateUtils.getMonth(a),r=DateUtils.getYear(a),o=e(i,s,r);return new DateModel(o)}function s(e,a,n){t.data=new DataClass(e,a,n),t.ngModel=t.data.selected}t.apdIsUtc=t.apdIsUtc||!1;var r=(new xDateCore(new Date(2015,6,26).getTime(),new Date(2015,5,2).getTime(),new Date(2015,7,30).getTime()),{initDateModel:null,startDateTime:null,endDateTime:null}),o={handler:null,start:function(e){o.handler=t.$watch("ngModel.dt",function(t,a){e&&e(t,a)},!0)},stop:function(){return o.handler(),!0}};t.onDaySelectChanged=function(n){if(n){var i=e(t.data.selected.d,t.data.selected.m,t.data.selected.y);a(i)}},t.onMonthSelectChanged=function(n){if(n||0===n){var i,s=t.data.selected.y,r=t.data.selected.d;i=e(r,n,s),a(i),t.data.reloadDaysList()}},t.onYearSelectChanged=function(n){if(n||0===n){var i=t.data.selected.m,s=t.data.selected.d,r=e(s,i,n);a(r),t.data.reloadMonthList(),t.data.reloadDaysList()}},function(){r.startDateTime=t.apdStart?+t.apdStart:null,r.endDateTime=t.apdEnd?+t.apdEnd:null,r.initDateModel=i(t.ngModel),s(r.initDateModel,r.startDateTime,r.endDateTime),t.daysList=t.apdLocalization&&t.apdLocalization.daysList?t.apdLocalization.daysList:Config.daysList,t.monthList=t.apdLocalization&&t.apdLocalization.monthList?t.apdLocalization.monthList:Config.monthList,o.start(n)}()}}}),angular.module("angular-pd.templates",[]).run(["$templateCache",function(t){t.put("apd.html",'<div class=apd_root><select ng-model=data.selected.d ng-options="day for day in data.list.d" ng-init="data.selected.d = data.list.d[0]" ng-change=onDaySelectChanged(data.selected.d) id={{::apdDayId}} class="apd_elem apd_select_day apd_select {{::apdDayClasses}}"></select><span ng-bind=daysList[data.selected.dow] class="apd_elem apd_day_of_week"></span><select ng-model=data.selected.m ng-options="monthList[month] for month in data.list.m" ng-init="data.selected.m = data.list.m[0]" ng-change=onMonthSelectChanged(data.selected.m) id={{::apdMonthId}} class="apd_elem apd_select_month apd_select {{::apdMonthClasses}}"></select><select ng-model=data.selected.y ng-options="year for year in data.list.y" ng-init="data.selected.y = data.list.y[0]" ng-change=onYearSelectChanged(data.selected.y) id={{::apdYearId}} class="apd_elem apd_select_year apd_select {{::apdYearClasses}}"></select></div>')}]);
//# sourceMappingURL=angular-pure-datepicker.min.js.map
