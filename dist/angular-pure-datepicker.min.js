var xDateCore=function(t,e,i){"use strict";var s={Config:{isUtc:!1,direction:{d:"asc",m:"asc",y:"desc"},defaultYearsCount:30,daysList:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthList:["January","February","March","April","May","June","July","August","September","October","November","December"]},CommonUtils:{isValidNumber:function(t){var e=!isNaN(parseFloat(t)),i=isFinite(t);return e&&i},getArrayOfNumbers:function(t,e){if(!this.isValidNumber(t)||!this.isValidNumber(e))return[];var i=t>e,s=i?t-e+1:e-t+1,n=new Array(s),r=Array.apply(null,n),a=r.map(function(s,n){return i?n+e:n+t});return i?a.reverse():a},intArraySort:function(t,e){function i(t,e){return e-t}var s="desc";switch(e){default:return t.sort(function(t,e){return t-e});case s:return t.sort(i)}}},ListsState:{list:{},reloadDaysList:function(){this.list.d=s.DaysUtils.getDaysList()},reloadMonthList:function(){this.list.m=s.MonthUtils.getMonthList()},reloadYearsList:function(){this.list.y=s.YearsUtils.getYearsList()},initList:function(){this.reloadDaysList(),this.reloadMonthList(),this.reloadYearsList()}},DateModel:function(){return function(t){if(!t||Number.isNaN(+t)||!Number.isFinite(+t))throw"NaN or null";return this.d=s.DateUtils.getDay(+t),this.dow=s.DateUtils.getDayOfWeek(+t),this.m=s.DateUtils.getMonth(+t),this.y=s.DateUtils.getYear(+t),this.dt=+t,this.tz=new Date(+t).getTimezoneOffset(),this}}(),DateUtils:function(){function t(t,e){var i=new Date(+t);return i&&e?e.call(i):null}var e={getDay:function(e){if(!e&&0!==e)return null;var i=s.Config.isUtc?Date.prototype.getUTCDate:Date.prototype.getDate;return t(e,i)},getDayOfWeek:function(e){if(!e&&0!==e)return null;var i=s.Config.isUtc?Date.prototype.getUTCDay:Date.prototype.getDay;return t(e,i)},getYear:function(e){if(!e&&0!==e)return null;var i=s.Config.isUtc?Date.prototype.getUTCFullYear:Date.prototype.getFullYear;return t(e,i)},getMonth:function(e){if(!e&&0!==e)return null;var i=s.Config.isUtc?Date.prototype.getUTCMonth:Date.prototype.getMonth;return t(e,i)},getDaysInMonth:function(t,e){var i=s.Config.isUtc?Date.prototype.getUTCDate:Date.prototype.getDate;return i.call(new Date(+e,+t+1,0))},isValidModel:function(t){return!!t&&(!!t.dt||0===t.dt)&&!Number.isNaN(+t.dt)&&Number.isFinite(+t.dt)},isDateUpperStartLimit:function(t,e){if(!e)return!0;if(!t&&0!==t||Number.isNaN(+t)||Number.isNaN(+e))throw"NaN or null";return+t>+e},isDateLowerEndLimit:function(t,e){if(!e)return!0;if(Number.isNaN(+t)||Number.isNaN(+e))throw"NaN or null";return+e>+t},isDateBetweenLimits:function(t,i,s){return e.isDateUpperStartLimit(t,i)&&e.isDateLowerEndLimit(t,s)}};return e}(),DaysUtils:{getDaysList:function(){var t,e=1,i=s.DateUtils.getDaysInMonth(s.State.selected.y,s.State.selected.y),n=s.State.start.isExist,r=s.State.end.isExist;if(n||r){var a=n?s.State.start.y===s.State.selected.y:!1,o=r?s.State.end.y===s.State.selected.y:!1,l=n?s.State.start.m===s.State.selected.y:!1,d=r?s.State.end.m===s.State.selected.y:!1,u=a&&l,c=o&&d,m=n?s.State.start.d:e,f=r?s.State.end.d:i;t=u&&c?s.CommonUtils.getArrayOfNumbers(m,f):u&&!c?s.CommonUtils.getArrayOfNumbers(m,i):!u&&c?s.CommonUtils.getArrayOfNumbers(e,f):s.CommonUtils.getArrayOfNumbers(e,i)}else t=s.CommonUtils.getArrayOfNumbers(e,i);return s.CommonUtils.intArraySort(t,s.Config.direction.d)}},State:{selected:{},setSelected:function(t){var e,i=({isDtUpperStart:t>this.start.dt,isDtEqualStart:t===this.start.dt,isDtLowerEnd:t>this.end.dt,isDtEqualEnd:t===this.end.dt},t>this.start.dt),n=t===this.start.dt,r=t>this.end.dt,a=t===this.end.dt;e=i||n||r||a?t:!i&&this.start.isExist?this.start:!r&&this.end.isExist?this.end.dt:+new Date,this.selected=new s.DateModel(e)},start:{},setStart:function(t){(t||0===t)&&(this.start=new s.DateModel(t),this.start.isExist=!0)},end:{},setEnd:function(t){(t||0===t)&&(this.end=new s.DateModel(t),this.end.isExist=!0)},setLimits:function(t,e){this.setStart(t),this.setEnd(e)},resetNow:function(){this.now=new s.DateModel(+new Date)},now:null},MonthUtils:{getMonthList:function(){var t,e=0,i=11,n=s.State.start.isExist,r=s.State.end.isExist;if(n||r){var a=n?s.State.start.y===s.State.selected.y:!1,o=r?s.State.end.y===s.State.selected.y:!1,l=n?s.State.start.m:e,d=r?s.State.end.m:i;t=a&&o?s.CommonUtils.getArrayOfNumbers(l,d):a&&!o?s.CommonUtils.getArrayOfNumbers(l,i):!a&&o?s.CommonUtils.getArrayOfNumbers(e,d):s.CommonUtils.getArrayOfNumbers(e,i)}else t=s.CommonUtils.getArrayOfNumbers(e,i);return s.CommonUtils.intArraySort(t,s.Config.direction.m)}},YearsUtils:function(){function t(t,e,i){var s=e>i?e:i;return s+=t-1}function e(t,e,i){var s=i>e?e:i;return s-=t-1}function i(i,n,r,a){var o=s.Config.defaultYearsCount,l=t(o,i,a),d=e(o,i,a),u={isBoth:!(!n||!r),isBothNot:!(n||r),isOnlyStart:!(!n||r),isOnlyEnd:!(n||!r),isStartLower:r>n,isEndLower:n>r,isStartEqualEnd:n===r,isEndUpperNow:r>a,isEndEqualNow:r===a};if(u.isBoth&&u.isStartLower)return{from:n,to:r};if(u.isBoth&&u.isEndLower)return{from:r,to:n};if(u.isBoth&&u.isStartEqualEnd)return{from:n,to:r};if(u.isOnlyStart)return{from:n,to:l};if(u.isOnlyEnd){if(u.isEndUpperNow||u.isEndEqualNow)return d-o>r-o?{from:d,to:r}:{from:r-(o-1),to:r};if(!u.isEndUpperNow)return{from:r-(o-1),to:r}}return u.isBothNot?{from:d,to:l}:void 0}var n={getYearsList:function(){var t=i(s.State.selected.y,s.State.start.y,s.State.end.y,s.State.now.y),e=s.CommonUtils.getArrayOfNumbers(t.from,t.to);return s.CommonUtils.intArraySort(e,s.Config.direction.y)}};return n}()};return s.State.resetNow(),s.State.setLimits(e,i),s.State.setSelected(t),s};angular.module("angular-pd",["angular-pd.templates"]).directive("pureDatepicker",function(){return{restrict:"E",replace:!0,templateUrl:"apd.html",scope:{ngModel:"=",apdStart:"=?",apdEnd:"=?",apdLocalization:"=?",apdIsUtc:"=?"},link:function(t){function e(t){return JSON.parse(JSON.stringify(t))}function i(t){return t&&t.dt?e(t.dt):null}function s(){var s=i(t.ngModel)||+new Date,r=i(t.apdStart),a=i(t.apdEnd);n=new xDateCore(s,r,a),n.ListsState.initList(),t.lists={d:n.ListsState.list.d,m:n.ListsState.list.m,y:n.ListsState.list.y},t.ngModel=e(n.State.selected)}t.apdIsUtc=t.apdIsUtc||!1;var n,r=!1;t.$watch("ngModel",function(i,s){n&&n.DateUtils.isValidModel(i)&&i.dt!==s.dt&&(r||(r=!0,n.State.setSelected(i.dt),t.ngModel=e(n.State.selected),r=!1))},!0),function(){s(),t.daysList=t.apdLocalization&&t.apdLocalization.daysList?t.apdLocalization.daysList:n.Config.daysList,t.monthList=t.apdLocalization&&t.apdLocalization.monthList?t.apdLocalization.monthList:n.Config.monthList}()}}}),angular.module("angular-pd.templates",[]).run(["$templateCache",function(t){t.put("apd.html",'<div class=apd_root><select ng-model=selected.d ng-options="day for day in lists.d" ng-init="selected.d = lists.d[0]" class="apd_elem apd_select_day apd_select"></select><span ng-bind=daysList[lists.dow] class="apd_elem apd_day_of_week"></span><select ng-model=selected.m ng-options="monthList[month] for month in lists.m" ng-init="selected.m = lists.m[0]" class="apd_elem apd_select_month apd_select"></select><select ng-model=selected.y ng-options="year for year in lists.y" ng-init="selected.y = lists.y[0]" class="apd_elem apd_select_year apd_select"></select></div>')}]);
//# sourceMappingURL=angular-pure-datepicker.min.js.map
