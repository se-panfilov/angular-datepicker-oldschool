var xDateCore=function(t,e,n){"use strict";var i={Config:{isUtc:!1,direction:{d:"asc",m:"asc",y:"desc"},defaultYearsCount:30,daysList:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthList:["January","February","March","April","May","June","July","August","September","October","November","December"]},CommonUtils:{isValidNumber:function(t){var e=!isNaN(parseFloat(t)),n=isFinite(t);return e&&n},getArrayOfNumbers:function(t,e){if(!this.isValidNumber(t)||!this.isValidNumber(e))return[];var n=t>e,i=n?t-e+1:e-t+1,a=new Array(i),s=Array.apply(null,a),r=s.map(function(i,a){return n?a+e:a+t});return n?r.reverse():r},intArraySort:function(t,e){function n(t,e){return e-t}var i="desc";switch(e){default:return t.sort(function(t,e){return t-e});case i:return t.sort(n)}}},ListsState:{list:{},reloadDaysList:function(){this.list.d=i.DaysUtils.getDaysList()},reloadMonthList:function(){this.list.m=i.MonthUtils.getMonthList()},reloadYearsList:function(){this.list.y=i.YearsUtils.getYearsList()},initList:function(){this.reloadDaysList(),this.reloadMonthList(),this.reloadYearsList()}},DateModel:function(){return function(t){if(!t||Number.isNaN(+t)||!Number.isFinite(+t))throw"NaN or null";return this.d=i.DateUtils.getDay(+t),this.dow=i.DateUtils.getDayOfWeek(+t),this.m=i.DateUtils.getMonth(+t),this.y=i.DateUtils.getYear(+t),this.dt=+t,this.tz=new Date(+t).getTimezoneOffset(),this}}(),DateUtils:function(){function t(t,e){var n=new Date(+t);return n&&e?e.call(n):null}var e={getDay:function(e){if(!e&&0!==e)return null;var n=i.Config.isUtc?Date.prototype.getUTCDate:Date.prototype.getDate;return t(e,n)},getDayOfWeek:function(e){if(!e&&0!==e)return null;var n=i.Config.isUtc?Date.prototype.getUTCDay:Date.prototype.getDay;return t(e,n)},getYear:function(e){if(!e&&0!==e)return null;var n=i.Config.isUtc?Date.prototype.getUTCFullYear:Date.prototype.getFullYear;return t(e,n)},getMonth:function(e){if(!e&&0!==e)return null;var n=i.Config.isUtc?Date.prototype.getUTCMonth:Date.prototype.getMonth;return t(e,n)},getDaysInMonth:function(t,e){var n=i.Config.isUtc?Date.prototype.getUTCDate:Date.prototype.getDate;return n.call(new Date(+e,+t+1,0))},isValidModel:function(t){return!!t&&(!!t.dt||0===t.dt)&&!Number.isNaN(+t.dt)&&Number.isFinite(+t.dt)},isDateUpperStartLimit:function(t,e){if(!e)return!0;if(!t&&0!==t||Number.isNaN(+t)||Number.isNaN(+e))throw"NaN or null";return+t>+e},isDateLowerEndLimit:function(t,e){if(!e)return!0;if(Number.isNaN(+t)||Number.isNaN(+e))throw"NaN or null";return+e>+t},isDateBetweenLimits:function(t,n,i){return e.isDateUpperStartLimit(t,n)&&e.isDateLowerEndLimit(t,i)}};return e}(),DaysUtils:{getDaysList:function(){var t,e=1,n=i.DateUtils.getDaysInMonth(i.State.selected.y,i.State.selected.y),a=i.State.start.isExist,s=i.State.end.isExist;if(a||s){var r=a?i.State.start.y===i.State.selected.y:!1,o=s?i.State.end.y===i.State.selected.y:!1,d=a?i.State.start.m===i.State.selected.y:!1,l=s?i.State.end.m===i.State.selected.y:!1,u=r&&d,c=o&&l,m=a?i.State.start.d:e,f=s?i.State.end.d:n;t=u&&c?i.CommonUtils.getArrayOfNumbers(m,f):u&&!c?i.CommonUtils.getArrayOfNumbers(m,n):!u&&c?i.CommonUtils.getArrayOfNumbers(e,f):i.CommonUtils.getArrayOfNumbers(e,n)}else t=i.CommonUtils.getArrayOfNumbers(e,n);return i.CommonUtils.intArraySort(t,i.Config.direction.d)}},State:{selected:{},setSelected:function(t,e){var n,a=this;if(e)return void(this.selected=new i.DateModel(t));var s={isStart:a.start.isExist,isEnd:a.end.isExist,isDtBeyondStart:t>this.start.dt,isDtBeyondEnd:t>this.end.dt};s.isStart||s.isEnd?s.isDtBeyondStart?s.isDtBeyondEnd||(n=this.end.dt):n=this.start.dt:n=t,this.selected=new i.DateModel(n)},start:{},setStart:function(t){(t||0===t)&&(this.start=new i.DateModel(t),cases.isStart=!0)},end:{},setEnd:function(t){(t||0===t)&&(this.end=new i.DateModel(t),cases.isEnd=!0)},setLimits:function(t,e){this.setStart(t),this.setEnd(e)},resetNow:function(){this.now=new i.DateModel(+new Date)},now:null},MonthUtils:{getMonthList:function(){var t,e=0,n=11,a=i.State.start.isExist,s=i.State.end.isExist;if(a||s){var r=a?i.State.start.y===i.State.selected.y:!1,o=s?i.State.end.y===i.State.selected.y:!1,d=a?i.State.start.m:e,l=s?i.State.end.m:n;t=r&&o?i.CommonUtils.getArrayOfNumbers(d,l):r&&!o?i.CommonUtils.getArrayOfNumbers(d,n):!r&&o?i.CommonUtils.getArrayOfNumbers(e,l):i.CommonUtils.getArrayOfNumbers(e,n)}else t=i.CommonUtils.getArrayOfNumbers(e,n);return i.CommonUtils.intArraySort(t,i.Config.direction.m)}},YearsUtils:function(){function t(t,e,n){var i=e>n?e:n;return i+=t-1}function e(t,e,n){var i=n>e?e:n;return i-=t-1}function n(n,a,s,r){var o=i.Config.defaultYearsCount,d=t(o,n,r),l=e(o,n,r),u={isBoth:!(!a||!s),isBothNot:!(a||s),isOnlyStart:!(!a||s),isOnlyEnd:!(a||!s),isStartLower:s>a,isEndLower:a>s,isStartEqualEnd:a===s,isEndUpperNow:s>r,isEndEqualNow:s===r};if(u.isBoth&&u.isStartLower)return{from:a,to:s};if(u.isBoth&&u.isEndLower)return{from:s,to:a};if(u.isBoth&&u.isStartEqualEnd)return{from:a,to:s};if(u.isOnlyStart)return{from:a,to:d};if(u.isOnlyEnd){if(u.isEndUpperNow||u.isEndEqualNow)return l-o>s-o?{from:l,to:s}:{from:s-(o-1),to:s};if(!u.isEndUpperNow)return{from:s-(o-1),to:s}}return u.isBothNot?{from:l,to:d}:void 0}var a={getYearsList:function(){var t=n(i.State.selected.y,i.State.start.y,i.State.end.y,i.State.now.y),e=i.CommonUtils.getArrayOfNumbers(t.from,t.to);return i.CommonUtils.intArraySort(e,i.Config.direction.y)}};return a}()};return i.State.resetNow(),i.State.setLimits(e,n),i.State.setSelected(t),i};angular.module("angular-pd",["angular-pd.templates"]).directive("pureDatepicker",function(){return{restrict:"E",replace:!0,templateUrl:"apd.html",scope:{ngModel:"=",apdStart:"=?",apdEnd:"=?",apdLocalization:"=?",apdIsUtc:"=?"},link:function(t){function e(t){return JSON.parse(JSON.stringify(t))}function n(t){return t&&t.dt?e(t.dt):null}function i(){var i=n(t.ngModel)||+new Date,s=n(t.apdStart),r=n(t.apdEnd);a=new xDateCore(i,s,r),a.ListsState.initList(),t.lists={d:a.ListsState.list.d,m:a.ListsState.list.m,y:a.ListsState.list.y},t.ngModel=e(a.State.selected)}t.apdIsUtc=t.apdIsUtc||!1;var a;t.isUpdateFromCore=!1,t.$watch("ngModel",function(n,i){a&&a.DateUtils.isValidModel(n)&&n.dt!==i.dt&&(t.isUpdateFromCore||(t.isUpdateFromCore=!0,a.State.setSelected(n.dt),t.ngModel=e(a.State.selected),t.isUpdateFromCore=!1))},!0),t.onSelectChanged=function(){t.ngModel.dt=+new Date(t.ngModel.y,t.ngModel.m,t.ngModel.d)},function(){i(),t.daysList=t.apdLocalization&&t.apdLocalization.daysList?t.apdLocalization.daysList:a.Config.daysList,t.monthList=t.apdLocalization&&t.apdLocalization.monthList?t.apdLocalization.monthList:a.Config.monthList}()}}}),angular.module("angular-pd.templates",[]).run(["$templateCache",function(t){t.put("apd.html",'<div class=apd_root><select ng-model=ngModel.d ng-options="day for day in lists.d" ng-init="ngModel.d = lists.d[0]" ng-change=onSelectChanged() class="apd_elem apd_select_day apd_select"></select><span ng-bind=daysList[ngModel.dow] class="apd_elem apd_day_of_week"></span><select ng-model=ngModel.m ng-options="monthList[month] for month in lists.m" ng-init="ngModel.m = lists.m[0]" ng-change=onSelectChanged() class="apd_elem apd_select_month apd_select"></select><select ng-model=ngModel.y ng-options="year for year in lists.y" ng-init="ngModel.y = lists.y[0]" ng-change=onSelectChanged() class="apd_elem apd_select_year apd_select"></select></div>')}]);
//# sourceMappingURL=angular-pure-datepicker.min.js.map
