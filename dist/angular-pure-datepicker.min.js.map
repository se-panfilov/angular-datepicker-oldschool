{"version":3,"sources":["angular-pure-datepicker.js"],"names":["angularView","DateUtils","DataClass","Config","angular","module","directive","restrict","replace","templateUrl","scope","ngModel","apdStart","apdEnd","apdDayId","apdMonthId","apdYearId","apdDayClasses","apdMonthClasses","apdYearClasses","apdLocalization","apdIsUtc","link","getLimitSafeDatetime","day","month","year","datetime","Date","getTime","isDateBetweenLimits","settings","startDateTime","endDateTime","isDateUpperStartLimit","isDateLowerEndLimit","updateModel","ngModelWatcher","stop","data","selected","DateModel","start","onModelChange","oldValue","getDay","getMonth","getYear","reloadYearsList","reloadMonthList","reloadDaysList","getInitDateModel","model","initDatetime","isInitModelValid","isValidModel","dt","limitSafeDatetime","_initData","initDateModel","handler","callback","$watch","value","onDaySelectChanged","d","m","y","onMonthSelectChanged","onYearSelectChanged","daysList","monthList","isUtc","monthDirection","daysDirection","yearsDirection","CommonUtils","t","isValidNumber","e","isNaN","r","isFinite","getArrayOfNumbers","n","push","intArraySort","sort","getIntArr","_getIntArr","concat","call","isUTC","prototype","getUTCDate","getDate","getDayOfWeek","getUTCDay","getUTCFullYear","getFullYear","getUTCMonth","getDaysInMonth","LimitsModel","s","this","i","end","a","now","dow","tz","getTimezoneOffset","YearsUtils","getYearsList","o","u","l","g","f","c","yearsListDirection","MonthUtils","getMonthList","monthListDirection","DaysUtils","getDaysList","D","h","U","daysListDirection","_start","_end","_limitDates","list","run","$templateCache","put"],"mappings":"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","file":"angular-pure-datepicker.min.js","sourcesContent":["var angularView = (function (DateUtils, DataClass, Config) {\n    'use strict';\n\n\n    angular.module('angular-pd', [\n        'angular-pd.templates'\n    ])\n\n        .directive('pureDatepicker', function () {\n            return {\n                restrict: 'E',\n                replace: true,\n                templateUrl: 'apd.html',\n                scope: {\n                    ngModel: '=',\n                    apdStart: '=?',\n                    apdEnd: '=?',\n                    apdDayId: '@?',\n                    apdMonthId: '@?',\n                    apdYearId: '@?',\n                    apdDayClasses: '@?',\n                    apdMonthClasses: '@?',\n                    apdYearClasses: '@?',\n                    apdLocalization: '=?',\n                    apdIsUtc: '=?'\n                },\n                link: function (scope) {\n\n                    scope.apdIsUtc = scope.apdIsUtc || false;\n\n                    //TODO (S.Panfilov) check for cross-browser support\n                    //TODO (S.Panfilov) may be should add tests\n                    var settings = {\n                        initDateModel: null,\n                        startDateTime: null,\n                        endDateTime: null\n                    };\n\n                    var ngModelWatcher = {\n                        handler: null,\n                        start: function (callback) {\n                            ngModelWatcher.handler = scope.$watch('ngModel.dt', function (value, oldValue) {\n                                if (callback) {\n                                    callback(value, oldValue)\n                                }\n\n                            }, true);\n                        },\n                        stop: function () {\n                            ngModelWatcher.handler();\n                            return true;\n                        }\n                    };\n\n\n                    function getLimitSafeDatetime(day, month, year) {\n\n                        var datetime = new Date(year, month, day).getTime();\n\n                        if (!DateUtils.isDateBetweenLimits(datetime, settings.startDateTime, settings.endDateTime)) {\n                            if (!DateUtils.isDateUpperStartLimit(datetime, settings.startDateTime)) {\n                                datetime = settings.startDateTime;\n                            } else if (!DateUtils.isDateLowerEndLimit(datetime, settings.endDateTime)) {\n                                datetime = settings.endDateTime;\n                            }\n                        }\n\n                        return datetime;\n                    }\n\n                    function updateModel(datetime) {\n                        ngModelWatcher.stop();\n                        scope.data.selected = new DateModel(datetime);\n                        scope.ngModel = scope.data.selected;\n                        ngModelWatcher.start(onModelChange);\n                    }\n\n                    function onModelChange(datetime, oldValue) {\n                        if (datetime === oldValue) {\n                            return;\n                        }\n\n                        var day = DateUtils.getDay(datetime);\n                        var month = DateUtils.getMonth(datetime);\n                        var year = DateUtils.getYear(datetime);\n\n                        datetime = getLimitSafeDatetime(day, month, year);\n                        updateModel(datetime);\n\n                        scope.data.reloadYearsList();\n                        scope.data.reloadMonthList();\n                        scope.data.reloadDaysList();\n                    }\n\n                    function getInitDateModel(model) {\n                        var isInitModelValid = DateUtils.isValidModel(model);\n                        var initDatetime;\n\n                        if (isInitModelValid) {\n                            initDatetime = model.dt\n                        } else {\n                            initDatetime = new Date().getTime();\n                        }\n\n                        var day = DateUtils.getDay(initDatetime);\n                        var month = DateUtils.getMonth(initDatetime);\n                        var year = DateUtils.getYear(initDatetime);\n\n                        var limitSafeDatetime = getLimitSafeDatetime(day, month, year);\n\n                        return new DateModel(limitSafeDatetime);\n                    }\n\n                    function _initData(initDateModel, startDateTime, endDateTime) {\n                        scope.data = new DataClass(initDateModel, startDateTime, endDateTime);\n                        scope.ngModel = scope.data.selected;\n                    }\n\n\n                    scope.onDaySelectChanged = function (day) {\n                        if (!day) return;\n\n                        var datetime = getLimitSafeDatetime(scope.data.selected.d, scope.data.selected.m, scope.data.selected.y);\n                        updateModel(datetime);\n                    };\n\n                    scope.onMonthSelectChanged = function (month) {\n                        if (!month && month !== 0) return;\n\n                        var datetime;\n                        var year = scope.data.selected.y;\n                        var day = scope.data.selected.d;\n\n                        datetime = getLimitSafeDatetime(day, month, year);\n                        updateModel(datetime);\n\n                        scope.data.reloadDaysList();\n                    };\n\n                    scope.onYearSelectChanged = function (year) {\n                        if (!year && year !== 0) return;\n\n                        var month = scope.data.selected.m;\n                        var day = scope.data.selected.d;\n\n                        var datetime = getLimitSafeDatetime(day, month, year);\n                        updateModel(datetime);\n\n                        scope.data.reloadMonthList();\n                        scope.data.reloadDaysList();\n                    };\n\n                    (function _init() {\n                        settings.startDateTime = (scope.apdStart) ? +scope.apdStart : null;\n                        settings.endDateTime = (scope.apdEnd) ? +scope.apdEnd : null;\n                        settings.initDateModel = getInitDateModel(scope.ngModel);\n                        _initData(settings.initDateModel, settings.startDateTime, settings.endDateTime);\n\n                        //TODO (S.Panfilov) localization fix\n                        var localization = scope.apdLocalization || null;\n                        scope.daysList = Config.daysList;\n                        scope.monthList = Config.monthList;\n\n                        ngModelWatcher.start(onModelChange);\n                    })();\n\n                }\n            }\n        });\n})(DateUtils, DataClass, Config);\n\"use strict\";var Config={isUtc:!1,monthDirection:\"asc\",daysDirection:\"asc\",yearsDirection:\"desc\",daysList:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],monthList:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"]},CommonUtils=function(){var t={isValidNumber:function(t){var e=!isNaN(t),r=isFinite(t);return e&&r},getArrayOfNumbers:function(t,e){for(var r=[],n=t;e>=n;n++)r.push(n);return r},intArraySort:function(t,e){function r(t,e){return e-t}switch(e){default:return t.sort(function(t,e){return t-e});case\"desc\":return t.sort(r)}},getIntArr:function(e){return e||0===e?e?t._getIntArr(e-1).concat(e):[]:void 0}};return t}(),DateUtils=function(t){function e(t,e){var r=new Date(t);return e.call(r)}var r={getDay:function(r){var n=t.isUTC?Date.prototype.getUTCDate:Date.prototype.getDate;return e(r,n)},getDayOfWeek:function(r){var n=t.isUTC?Date.prototype.getUTCDay:Date.prototype.getDay;return e(r,n)},getYear:function(r){var n=t.isUTC?Date.prototype.getUTCFullYear:Date.prototype.getFullYear;return e(r,n)},getMonth:function(r){var n=t.isUTC?Date.prototype.getUTCMonth:Date.prototype.getMonth;return e(r,n)},getDaysInMonth:function(e,r){var n=t.isUTC?Date.prototype.getUTCDate:Date.prototype.getDate;return n.call(new Date(r,e+1,0))},isValidModel:function(t){return!(!t||!t.dt&&0!==t.dt)},isDateUpperStartLimit:function(t,e){return e?t>e:!0},isDateLowerEndLimit:function(t,e){return e?e>t:!0},isDateBetweenLimits:function(t,e,n){return r.isDateUpperStartLimit(t,e)&&r.isDateLowerEndLimit(t,n)}};return r}(Config),LimitsModel=function(t){function e(e,r){function n(e){return s.start.d=t.getDay(e),s.start.m=t.getMonth(e),s.start.y=t.getYear(e),s.start.dt=e,this}function i(e){return s.end.d=t.getDay(e),s.end.m=t.getMonth(e),s.end.y=t.getYear(e),s.end.dt=e,this}function a(){var e=(new Date).getTime();return s.now.d=t.getDay(e),s.now.m=t.getMonth(e),s.now.y=t.getYear(e),s.now.dt=e,this}var s={start:{},end:{},now:{}};return n(e),i(r),a(),s}return e}(DateUtils),DateModel=function(t){function e(e){return this.d=t.getDay(e),this.dow=t.getDayOfWeek(e),this.m=t.getMonth(e),this.y=t.getYear(e),this.dt=e,this.tz=new Date(e).getTimezoneOffset(),this}return e}(DateUtils),YearsUtils=function(t,e,r){var n={getYearsList:function(n,i,a,s){var o=[],u=10,l=s.start.y,d=s.end.y,y=s.now.y,g=t.getYear(a.dt),f=g>y?g:y,c=y>g?g:y;return f+=u-1,c-=u-1,n&&i&&i>n?o=e.getArrayOfNumbers(l,d):n&&i&&n>i?o=e.getArrayOfNumbers(d,l):n&&i&&n===i?o=e.getArrayOfNumbers(l,d):n&&!i?o=e.getArrayOfNumbers(l,f):!n&&i?s.end.y>=s.now.y?o=c-u>d-u?e.getArrayOfNumbers(c,d):e.getArrayOfNumbers(d-(u-1),d):s.end.y>s.now.y&&(o=e.getArrayOfNumbers(d-(u-1),d)):n||i||(o=e.getArrayOfNumbers(c,f)),e.intArraySort(o,r.yearsListDirection)}};return n}(DateUtils,CommonUtils,Config),MonthUtils=function(t,e,r,n){var i={getMonthList:function(e,i,a){var s,o=0,u=11;if(e||i){var l=e?t.start.y===a:!1,d=i?t.end.y===a:!1,y=e?t.start.m:o,g=i?t.end.m:u;s=l&&d?r.getArrayOfNumbers(y,g):l&&!d?r.getArrayOfNumbers(y,u):!l&&d?r.getArrayOfNumbers(o,g):r.getArrayOfNumbers(o,u)}else s=r.getArrayOfNumbers(o,u);return r.intArraySort(s,n.monthListDirection)}};return i}(LimitsModel,DateUtils,CommonUtils,Config),DaysUtils=function(t,e,r,n){var i={getDaysList:function(i,a,s,o){var u,l=1,d=e.getDaysInMonth(o,s);if(i||a){var y=i?t.start.y===s:!1,g=a?t.end.y===s:!1,f=i?t.start.m===o:!1,c=a?t.end.m===o:!1,m=y&&f,D=g&&c,h=i?t.start.d:l,U=a?t.end.d:d;u=m&&D?r.getArrayOfNumbers(h,U):m&&!D?r.getArrayOfNumbers(h,d):!m&&D?r.getArrayOfNumbers(l,U):r.getArrayOfNumbers(l,d)}else u=r.getArrayOfNumbers(l,d);return r.intArraySort(u,n.daysListDirection)}};return i}(LimitsModel,DateUtils,CommonUtils,Config),DataClass=function(t,e,r,n,i,a){function s(t,e,r){var n,i=t.dt>e,s=t.dt===e,o=t.dt>r,u=t.dt===r;return n=new a(i||s||o||u?t.dt:i?i?(new Date).getTime():r:e)}return function(a,o,u){var l={_start:null,_end:null,_limitDates:null},d={selected:{},list:{y:null,m:null,d:null},reloadYearsList:function(){return d.list.y=r.getYearsList(l._start,l._end),this},reloadMonthList:function(){var e=t.getYear(d.selected.dt);return d.list.m=n.getMonthList(l._start,l._end,e),this},reloadDaysList:function(){var e=t.getYear(d.selected.dt),r=t.getMonth(d.selected.dt);return d.list.d=i.getDaysList(l._start,l._end,e,r),this}};a.dt=e.isValidNumber(a.dt)?a.dt:null,o=e.isValidNumber(o)?o:null,u=e.isValidNumber(u)?u:null,d.selected=s(a,o,u);var y=t.getYear(d.selected.dt),g=t.getMonth(d.selected.dt);return l._limitDates=new LimitsModel(o,u),l._start=o,l._end=u,d.list.y=r.getYearsList(o,u,d.selected,l._limitDates),d.list.m=n.getMonthList(o,u,y,l._limitDates),d.list.d=i.getDaysList(o,u,y,g,d.selected,l._limitDates),d}}(DateUtils,CommonUtils,YearsUtils,MonthUtils,DaysUtils,DateModel);\n//# sourceMappingURL=x-date-core.min.js.map\nangular.module(\"angular-pd.templates\", []).run([\"$templateCache\", function($templateCache) {$templateCache.put(\"apd.html\",\"<div class=apd_root><select ng-model=data.selected.d ng-options=\\\"day for day in data.list.d\\\" ng-init=\\\"data.selected.d = data.list.d[0]\\\" ng-change=onDaySelectChanged(data.selected.d) id={{::apdDayId}} class=\\\"apd_elem apd_select_day apd_select {{::apdDayClasses}}\\\"></select><span ng-bind=daysList[data.selected.dow] class=\\\"apd_elem apd_day_of_week\\\"></span><select ng-model=data.selected.m ng-options=\\\"monthList[month] for month in data.list.m\\\" ng-init=\\\"data.selected.m = data.list.m[0]\\\" ng-change=onMonthSelectChanged(data.selected.m) id={{::apdMonthId}} class=\\\"apd_elem apd_select_month apd_select {{::apdMonthClasses}}\\\"></select><select ng-model=data.selected.y ng-options=\\\"year for year in data.list.y\\\" ng-init=\\\"data.selected.y = data.list.y[0]\\\" ng-change=onYearSelectChanged(data.selected.y) id={{::apdYearId}} class=\\\"apd_elem apd_select_year apd_select {{::apdYearClasses}}\\\"></select></div>\");}]);"],"sourceRoot":"/source/"}